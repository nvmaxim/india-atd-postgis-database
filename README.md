# Административно‑территориальное деление Индии в БД NSI

Репозиторий содержит документацию и скрипты для загрузки данных административно‑территориального деления (АТД) Республики Индия в базу данных NSI на PostgreSQL/PostGIS.[file:1][file:2]

## Содержание

- [Описание данных](#описание-данных)
- [Архитектура БД NSI](#архитектура-бд-nsi)
- [Требования](#требования)
- [Развёртывание БД NSI](#развёртывание-бд-nsi)
- [Исходные пространственные данные](#исходные-пространственные-данные)
- [ETL‑процесс](#etl-процесс)
- [SQL‑скрипты загрузки](#sql-скрипты-загрузки)
- [Особенности городских и лесных территорий](#особенности-городских-и-лесных-территорий)
- [Реестр изменений кодов АТД](#реестр-изменений-кодов-атд)
- [Лицензия и источники](#лицензия-и-источники)

## Описание данных

Семантическая структура данных описана в документе `Opisanie-polei-vektornoi-BD-ATD-Indii-ver.-1.1.docx`.[file:1]  
Она определяет поля векторной БД АТД Индии от уровня штата до уровня деревни, включая коды LGD, возможные варианты названий, а также комментарии по происхождению и использованию кодов.[file:1]

Основные группы полей:

- Уровень штата: `StateCode`, `AltStateName`, `StateName`.[file:1]
- Уровень района: `DistrNumb`, `LGDDstCode`, `DistrName`.[file:1]
- Уровень Tehsil/Taluk/Mandal и SUB‑Tehsil: `TehsilNumb`, `LGDTehCode`, `TehsilName`, `SubTehNumb`, `LGDSThCode`, `SubTehName`.[file:1]
- Уровень блока CD Block: `BlockNumb`, `LGDBlkCode`, `BlockName`.[file:1]
- Уровень Gram Panchayat: `GPNumb`, `LGDGPCode`, `GPName`.[file:1]
- Уровень деревни: `VillNumb`, `LGDVilCode`, `VillName`, а также поле `Info` для дополнительных статусов (Forest, City, Not under any panchayat и т.п.).[file:1]

Все коды представлены как строки фиксированной длины `Char(16)` с возможным дополнением нулями слева.[file:1]

## Архитектура БД NSI

Данные АТД Индии загружаются во временные таблицы схемы `public`, далее нормализуются и связываются в схемe `atd`.[file:2]

Основные таблицы схемы `atd`:[file:2]

| Таблица            | Назначение                     |
|--------------------|--------------------------------|
| info_area_devision | Административные единицы      |
| shape              | Геометрические данные         |
| link_up_down       | Иерархические связи           |
| country            | Страны                        |
| type_devision      | Типы административных единиц  |
| status_shape       | Статус геометрий              |
| type_link          | Типы иерархических связей     |

[file:2]

## Требования

- PostgreSQL (рекомендуется актуальная версия, пример – 17).[file:2]
- Расширение PostGIS (устанавливается через Stack Builder).[file:2]
- Включённые GDAL‑драйверы (опция `Enable All GDAL Drivers`) для работы с пространственными форматами, включая `.tif`.[file:2]

Установка PostgreSQL/PostGIS может выполняться по инструкции «ФПМИ МФТИ - SQL для прикладных задач - Установка Postgre.pdf», при этом установку DBeaver можно пропустить.[file:2]

## Развёртывание БД NSI

1. Установка PostgreSQL и PostGIS через официальный дистрибутив EDB и Stack Builder (выбор PostGIS и драйверов `npgsql`, `pgjdbc`, `psqlodbc 64 bit`).[file:2]
2. Создание базы `nsi` и активация расширения PostGIS:
   ```sql
   CREATE EXTENSION postgis;
